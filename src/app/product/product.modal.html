<div class="container-fluid vert-10">
  <div class="row">
    <div class="col col-sm-7">
      <img ng-src="{{ modal.mainImage.url }}" class="full-width" name="mainImage">
      <!-- images -->
      <div ng-show="modal.product.image_meta.additional_images.length > 0" class="vert-5">
        <img ng-src="{{ modal.product.image_meta.main_image.url | thumbnail }}"
             class="inline-block width-62 gray-border hover-pointer margin-2"
             ng-click="modal.setMainImage(modal.product.image_meta.main_image)" />
        <img ng-repeat="img in modal.product.image_meta.additional_images"
             ng-src="{{ img.url | thumbnail }}"
             class="inline-block width-62 gray-border hover-pointer margin-2"
             ng-click="modal.setMainImage(img)" />
      </div>
    </div>
    <div class="col col-sm-5">
      <div ng-hide="catalog.catalogData.loading">
        <div class="full-width text-right">
          <div class="btn btn-sm btn-default" ng-click="$close()">Close</div>
        </div>
        <h4 ng-bind="modal.product.title" class="vert-10"></h4>
        <h3 ng-bind="modal.product.calculated.selling_price | centToDollar" class="margin-0"></h3>
        <!-- customer view ONLY -->
        <div ng-show="isStore || modal.showCustomerView" class="position-relative">
          <div class="inline-block full-width vert-5"></div>
          <div class="btn btn-primary btn-block" ng-click="modal.addProductToCart(modal.product)">Add to cart</div>
          <div ng-if="isBuilder" class="popover popover-primary bottom in inline-block full-width max-width-300" style="top: 60px;" ng-show="modal.showAddPopover">
            <div class="btn btn-xs btn-primary margin-5 pull-right" ng-click="modal.showAddPopover = false">close</div>
            <div class="arrow arrow-primary"></div>
            <div class="popover-title">Added</div>
            <div class="popover-content">The customer would have just added this product to their cart for {{ modal.product.calculated.selling_price | centToDollar }}.</div>
          </div>
        </div>
        <!-- /customer view ONLY -->
        <!-- isBuilder ONLY -->
        <div ng-if="isBuilder" ng-hide="modal.showCustomerView">
          <div class="text-muted line-height-1">Recommended price. You earn&nbsp;<strong ng-bind="modal.product.calculated.earnings | centToDollar"></strong>&nbsp;each sale.</div>
          <div class="inline-block full-width vert-5"></div>
          <div ng-hide="showPriceOptions">
            <div ng-hide="modal.fns.inStorefront(modal.product.id)" class="btn btn-primary btn-block" ng-click="modal.addProduct(modal.product)">Add to store</div>
            <div ng-show="modal.fns.inStorefront(modal.product.id)" class="btn btn-danger margin-0 btn-block" ng-click="modal.removeProductSelection(modal.product)">Remove from store</div>
            <div class="btn btn-default btn-block" ng-click="showPriceOptions = true">Set a different price</div>
          </div>
          <!-- priceOptions -->
          <div ng-show="showPriceOptions">
            <div class="vert-2 margin-top-0">
              <small>Set your price (min {{ modal.product.baseline_price / (1 - modal.margins.minMargin) | centToDollar }} / max {{ modal.product.baseline_price / (1 - modal.margins.maxMargin) | centToDollar }})</small>
              <div class="input-group" style="max-width: 165px;">
                <span class="input-group-addon">$</span>
                <input type="text" class="form-control inline-block text-right">
                <span class="input-group-addon pad-5">.</span>
                <input type="text" class="form-control inline-block" style="width: 50px;">
              </div>
            </div>
            <div class="vert-2 margin-top-0">
              <small>Or set your margin (%)</small>
              <div class="btn-group btn-group-justified">
                <a href ng-repeat="margin in modal.margins.marginArray"
                    class="btn btn-default btn-xs" style="padding: 8px 0;"
                    ng-class="{ active: margin == modal.product.calculated.margin }"
                    ng-click="update(margin)">
                  {{ margin*100 }}<span ng-show="margin == modal.product.calculated.margin"><small><small>%</small></small></span>
                </a>
              </div>
            </div>
            <div class="btn btn-default btn-block" disabled>Save new price</div>
            <div class="btn btn-default btn-block" ng-click="showPriceOptions = false">Cancel</div>
          </div>
          <!-- /priceOptions -->
        </div>
        <!-- /isBuilder ONLY -->
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col col-sm-12">
      <p ng-bind="modal.product.content" class="pad-10"></p>
      <table ng-show="modal.product.content_meta && !catalog.catalogData.loading" class="table table-condensed table-striped table-bordered white-background">
        <tr ng-if="modal.product.content_meta.item_name">
          <td>Item</td>
          <td ng-bind="modal.product.content_meta.item_name"></td>
        </tr>
        <tr ng-if="modal.product.availability_meta.quantity">
          <td>Quantity Available</td>
          <td ng-bind="modal.product.availability_meta.quantity | truncateQty"></td>
        </tr>
        <tr ng-if="modal.product.shipping_price">
          <td>Shipping Cost</td>
          <td ng-bind="modal.product.shipping_price | centToDollar"></td>
        </tr>
        <tr ng-if="modal.product.content_meta.brand_name">
          <td>Brand Name</td>
          <td ng-bind="modal.product.content_meta.brand_name"</td>
        </tr>
        <tr ng-if="modal.product.content_meta.manufacturer">
          <td>Manufacturer</td>
          <td ng-bind="modal.product.content_meta.manufacturer"></td>
        </tr>
        <tr ng-if="modal.product.content_meta.condition">
          <td>Condition</td>
          <td ng-bind="modal.product.content_meta.condition"></td>
        </tr>
        <tr ng-if="modal.product.content_meta.warranty">
          <td>Warranty</td>
          <td ng-bind="modal.product.content_meta.warranty"></td>
        </tr>
        <tr ng-if="modal.product.content_meta.details">
          <td>Details</td>
          <td ng-bind-html="modal.product.content_meta.details | unboldHtml"></td>
        </tr>
      </table>
    </div>
  </div>
</div>
