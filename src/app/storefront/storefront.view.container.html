<nav id="navtop"
     class="navbar navbar-default navbar-rgba-colors margin-0 round-0"
     ng-style="{ 'background-color': user.storefront_meta.home.topBarBackgroundColor }">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a ui-sref="app.storefront.home"
         class="navbar-brand"
         ng-style="{ color: user.storefront_meta.home.topBarColor }"
         ng-bind="user.storefront_meta.home.name">
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div collapse="navCollapsed" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li ng-class="{ active: $state.current.name == 'app.storefront.home' }"><a ui-sref="app.storefront.home" ng-click="navCollapsed = true" ng-style="{ color: user.storefront_meta.home.topBarColor }">Home</a></li>

        <li ng-class="{ active: $state.current.name == 'app.storefront.shop' }" class="dropdown" dropdown>
          <a href class="dropdown-toggle" ng-style="{ color: user.storefront_meta.home.topBarColor }" dropdown-toggle>
            Shop <span class="caret"></span>
          </a>
          <ee-shop-nav ng-if="storefront" storefront="storefront" class="dropdown-menu"></ee-shop-nav>
        </li>

        <li ng-class="{ active: $state.current.name == 'app.storefront.blog' }"
            ng-show="$state.current.name == 'app.storefront.blog' || !!user.storefront_meta.blog.url">
          <a ui-sref="app.storefront.blog" ng-click="navCollapsed = true" ng-style="{ color: user.storefront_meta.home.topBarColor }">
            Blog
          </a>
          <div class="popover bottom in inline-block"
               style="top: 42px; width: 250px;"
               ng-show="$state.current.name == 'app.storefront.blog'">
            <div class="arrow" style="left: 12%;"></div>
            <div class="popover-content">
              <div ng-if="user.storefront_meta.blog.url">
                Customers will be directed to your&nbsp;
                <a href="{{ user.storefront_meta.blog.url | addHttp }}" target="_blank" class="btn btn-primary btn-sm">blog link</a>
              </div>
              <div ng-if="!user.storefront_meta.blog.url">
                Enter the link to your blog and this button will direct to it.
              </div>
            </div>
          </div>
        </li>

        <li ng-class="{ active: $state.current.name == 'app.storefront.about' }"
            ng-show="$state.current.name == 'app.storefront.about' || !!user.storefront_meta.about.headline">
          <a ui-sref="app.storefront.about" ng-click="navCollapsed = true" ng-style="{ color: user.storefront_meta.home.topBarColor }">
            About
          </a>
          <div class="popover bottom in inline-block"
               style="top: 42px; width: 250px;"
               ng-show="$state.current.name == 'app.storefront.about' && !user.storefront_meta.about.headline && !user.storefront_meta.about.content">
            <div class="arrow" style="left: 13%;"></div>
            <div class="popover-content">
              Add something about your store and this section will show.
            </div>
          </div>
        </li>

      </ul>
      <ul class="nav navbar-nav navbar-right">

<!--         <li>
  <div class="popover bottom in inline-block"
      style="top: 42px; width: 250px; right; left: auto;">
    <div class="arrow" style="left: 13%;"></div>
    <div class="popover-content">
      Add something about your store and this section will show.
    </div>
  </div>
</li> -->

        <li ng-if="!!user.storefront_meta.audience.social.facebook"><a ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-facebook"></i></a></li>
        <li ng-if="!!user.storefront_meta.audience.social.pinterest"><a ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-pinterest"></i></a></li>
        <li ng-if="!!user.storefront_meta.audience.social.twitter"><a ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-twitter"></i></a></li>
        <li ng-if="!!user.storefront_meta.audience.social.instagram"><a ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-instagram"></i></a></li>
        <li ng-if="!!user.storefront_meta.audience.contact.email"><a ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-envelope"></i></a></li>

        <li ng-show="$state.current.name == 'app.storefront.audience'">
          <a ng-if="!user.storefront_meta.audience.social.facebook && !user.storefront_meta.audience.social.pinterest && !user.storefront_meta.audience.social.twitter && !user.storefront_meta.audience.social.instagram && !user.storefront_meta.audience.contact.email"
             ui-sref="app.storefront.audience" class="squeeze-5" ng-style="{ color: user.storefront_meta.home.topBarColor }">
            <i class="fa fa-fw fa-facebook"></i>
            <i class="fa fa-fw fa-pinterest"></i>
            <i class="fa fa-fw fa-twitter"></i>
            <i class="fa fa-fw fa-instagram"></i>
            <i class="fa fa-fw fa-envelope"></i>
          </a>
          <div class="popover bottom in inline-block"
               style="top: 42px; width: 250px; right: -10px; left: auto;">
            <div class="arrow" style="left: auto; right: 4%;"></div>
            <div ng-if="!user.storefront_meta.audience.social.facebook && !user.storefront_meta.audience.social.pinterest && !user.storefront_meta.audience.social.twitter && !user.storefront_meta.audience.social.instagram && !user.storefront_meta.audience.contact.email"
                 class="popover-content">
              Add your social media & email and they will show here.
            </div>
            <div ng-if="!!user.storefront_meta.audience.social.facebook || !!user.storefront_meta.audience.social.pinterest || !!user.storefront_meta.audience.social.twitter || !!user.storefront_meta.audience.social.instagram || !!user.storefront_meta.audience.contact.email"
                 class="popover-content">
              <div ng-if="!!user.storefront_meta.audience.social.facebook || !!user.storefront_meta.audience.social.pinterest || !!user.storefront_meta.audience.social.twitter || !!user.storefront_meta.audience.social.instagram">
                Your links are active for
                <a ng-if='!!user.storefront_meta.audience.social.facebook' class="btn btn-info btn-block" href="http://facebook.com/{{ user.storefront_meta.audience.social.facebook }}" target="_blank"><i class="fa fa-fw fa-facebook"></i> Facebook<br><small><small>facebook.com/</small>{{ user.storefront_meta.audience.social.facebook }}</small></a>
                <a ng-if='!!user.storefront_meta.audience.social.pinterest' class="btn btn-danger btn-block" href="http://pinterest.com/{{ user.storefront_meta.audience.social.pinterest }}" target="_blank"><i class="fa fa-fw fa-pinterest"></i> Pinterest<br><small><small>pinterest.com/</small>{{ user.storefront_meta.audience.social.pinterest }}</small></a>
                <a ng-if='!!user.storefront_meta.audience.social.twitter' class="btn btn-primary btn-block" href="http://twitter.com/{{ user.storefront_meta.audience.social.twitter }}" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter<br><small><small>twitter.com/</small>{{ user.storefront_meta.audience.social.twitter }}</small></a>
                <a ng-if='!!user.storefront_meta.audience.social.instagram' class="btn btn-warning btn-block" href="http://instagram.com/{{ user.storefront_meta.audience.social.instagram }}" target="_blank"><i class="fa fa-fw fa-instagram"></i> Instagram<br><small><small>instagram.com/</small>{{ user.storefront_meta.audience.social.instagram }}</small></a>
                <br>
              </div>
              <div ng-if="user.storefront_meta.audience.contact.email">
                Customers can email you at
                <div class="full-width text-center">
                  <a class="btn btn-primary btn-block"
                     href="mailto:{{ user.storefront_meta.audience.contact.email }}"
                     target="_blank"
                     ng-bind="user.storefront_meta.audience.contact.email">
                  </a>
                </div>
              </div>
            </div>
          </div>
        </li>

        <!-- TODO implement search on storefront products -->
        <!-- <li><a ui-sref="app.storefront.home" ng-style="{ color: user.storefront_meta.home.topBarColor }"><i class="fa fa-search"></i></a></li> -->

        <li>
          <a ui-sref="app.storefront.home" ng-style="{ color: user.storefront_meta.home.topBarColor }">
            <i class="fa fa-shopping-cart"></i>
          </a>
        </li>

      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div ui-view class="white-background position-relative"></div>
