'use strict'

module = angular.module 'ee-canvas', []

module.directive "eeCanvas", ($state, $window, $timeout, eeCollections) ->
  templateUrl: 'components/ee-canvas.html'
  restrict: 'E'
  scope: {}
  link: (scope, ele, attrs) ->
    canvas = new fabric.Canvas('c')

    rect = new fabric.Rect({
      left: 150,
      top: 200,
      originX: 'left',
      originY: 'top',
      width: 150,
      height: 120,
      fill: 'rgba(255,0,0,0.5)',
      transparentCorners: false
    })

    triangle = new fabric.Triangle
      width: 35
      height: 30
      fill: 'blue'
      left: 750
      top: 50

    # imgElement = document.getElementById('my-image')
    # imgInstance = new fabric.Image(imgElement, {
    #   left: 10,
    #   top: 10,
    #   width: 150,
    #   height: 120,
    # })

    # url = 'https://www.dropbox.com/s/yq4mbr42kojw6wg/Sparkler.jpg?dl=0'
    # url = 'http://res.cloudinary.com/eeosk/image/upload/v1455670685/banner/cpld1j9mejmmfywmfylt.png'
    # url = 'http://madagascarcwp.weebly.com/uploads/7/2/7/0/7270238/8267601_orig.jpg'
    url = '/custom_image.jpg'

    # img = new Image()
    # img.setAttribute('crossOrigin', 'anonymous')
    # img.src = url
    # canvas.add img

    comicSansText = new fabric.Text "I'm some text",
      top: 400
      left: 50
      fontStyle: 'italic'
      fontFamily: 'Delicious'
      textAlign: 'right'
      # stroke: '#c3bfbf'
      # strokeWidth: 1

    fabric.Image.fromURL url, (oImg) ->
      # scale image down, and flip it, before adding it onto canvas
      oImg.scale 0.5 # .setFlipX(true);
      canvas.add oImg
      canvas.add(rect).setActiveObject(rect)
      canvas.add triangle
      canvas.add comicSansText

    # console.log 'canvas', canvas.toDataURL('png')

    $(document).ready () ->
      $.cloudinary.config({ cloud_name: 'eeosk' })
      $('.cloudinary').append($.cloudinary.unsigned_upload_tag('banner', {
        cloud_name: 'eeosk',
        tags: 'browser_uploads'
      }))
      # data = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAHWCAYAAACPJO1FAAAgAElEQVR4Xu3dCdQt2VkW4O84IIKiOKHiEBUREaI4D8HuKE44xbSKQwdR6XsjisYhtKKStANKoxjFIfemVSTtbFpFURxzr8EZFWlnUaOAsxInxPG4XrpKKifnv/+p+v9Tdar2U2uxyL23qnbt56teq96za+/alY0AAQIECBAgQIAAAQIzCexmakczBAgQIECAAAECBAgQKAHETUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIAAAQHEPUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIAAAQHEPUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIAAAQHEPUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIAAAQHEPUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIAAAQHEPUCAAAECBAgQIECAwGwCAshs1BoiQIAAAQIECBAgQEAAcQ8QIECAAAECBAgQIDCbgAAyG7WGCBAgQIAAAQIECBAQQNwDBAgQIECAAAECBAjMJiCAzEatIQIECBAgQIAAAQIEBBD3AAECBAgQIECAAAECswkIILNRa4gAAQIECBAgQIDA0gL796/affmSVyGALKmvbQIECBAgQIAAAQKzCuwfVO0en7XJg8YEkCX1tU2AAAECBAgQIEBgNoH9x1fVW6rqqardc7M1K4AsRa1dAgQIECBAgAABAksJ7N+7qr64qj6wqr6sqj6oaveVS1yNEZAl1LVJgAABAgQIECBAYFaB/adV1ScNmny2avf0rJfQNSaALKGuTQIECBAgQIAAAQKzCew/vKq+6EhzL6/avTjbZQggc1NrjwABAgQIECBAgMASAvu3VdWrj7T8QtXuibmvyAjI3OLaI0CAAAECBAgQIDCbwD7BIwHkqu2Jqt0Ls11OVQkgc2priwABAgQIECBAgMCsAvu8epVXsK7aXqzavXzOSxJA5tTWFgECBAgQIECAAIHZBPaZdJ7J59dtT1ftnr1up9v6dwHktiSdhwABAgQIECBAgMDFCOyz3G6W3c3yu9dtWY43y/Jmed6zbwLI2Yk1QIAAAQIECBAgQGBugX0+OJgPD566PVe1e+rUnW+ynwByEz3HEiBAgAABAgQIELg4gf1jVfVgwmU9XrV7OOG4UYcIIKO47EyAAAECBAgQIEDg0gX2CR8JIWO3h1W7x8ceNHZ/AWSsmP0JECBAgAABAgQIXKzAPq9d5fWrqdtTVbvnph58ynECyClK9iFAgAABAgQIECBw8QL7TDjPxPNMQJ+6ZSJ6JqRnYvpZNgHkLKxOSoAAAQIECBAgQGBugX2W3M3Suzfdnq3aPX3Tk1x1vAByLlnnJUCAAAECBAgQIDCbwD4fG8xHB29re3nV7sXbOtnwPALIOVSdkwABAgQIECBAgMCsAvu3VdWrb7HJF6p2T9zi+f7/qQSQc6g6JwECBAgQIECAAIHZBPYJHgkgt709UbV74bZPKoDctqjzESBAgAABAgQIEJhVYJ9Xr/IK1m1vL1btXn7bJxVAblvU+QgQIECAAAECBAjMJrDPpPNMPj/X9nTV7tnbPLkAcpuazkWAAAECBAgQIEBgNoF9ltvNsrtZfvdcW5bjzbK8WZ73VjYB5FYYnYQAAQIECBAgQIDA3AL7fHAwHx489/Zc1e6p22pEALktSechQIAAAQIECBAgMJvA/rGqejBbc1WPV+0e3kZ7AshtKDoHAQIECBAgQIAAgVkF9gkfCSFzbQ+rdo/fRmMCyG0oOgcBAgQIECBAgACB2QT2ee0qr1/NvT1VtXvupo0KIDcVdDwBAgQIECBAgACB2QT2mXCeieeZgD73lonomZCeiemTNwFkMp0DCRAgQIAAAQIECMwtsM+Su1l6d6nt2ard0zdpXAC5iZ5jCRAgQIAAAQIECMwmsM/HBvPRwaW3l1ftXpx6EQLIVDnHESBAgAABAgQIEJhVYP+2qnr1rE0eb+yFqt0TU69DAJkq5zgCBAgQIECAAAECBEYLCCCjyRxAgAABAgQIECBAgMBUAQFkqpzjCBAgQIAAAQIECBAYLSCAjCZzAAECBAgQIECAAAECUwUEkKlyjiNAgAABAgQIECBAYLSAADKazAEECBAgQIAAAQIECEwVEECmyjmOAAECBAgQIECAAIHRAgLIaDIHECBAgAABAgQIECAwVUAAmSrnOAIECBAgQIAAAQIERgsIIKPJHECAAAECBAgQIECAwFQBAWSqnOMIECBAgAABAgQIEBgtIICMJnMAAQIECBAgQIAAAQJTBQSQqXKOI0CAAAECBAgQIEBgtIAAMprMAQQIECBAgAABAgQITBUQQKbKOY4AAQIECBAgQIAAgdECAshoMgcQIECAAAECBAgQIDBVQACZKuc4AgQIECBAgAABAgRGCwggo8kcQIAAAQIECBAgQIDAVAEBZKqc4wgQIECAAAECBAgQGC0ggIwmcwABAgQIECBAgAABAlMFBJCpco4jQIAAAQIECBAgQGC0gAAymswBBAgQIECAAAECBAhMFRBApso5jgABAgQIECBAgACB0QICyGgyBxAgQIAAAQIECBAgMFVAAJkq5zgCBAgQIECAAAECBEYLCCCjyRxAgAABAgQIECBAgMBUAQFkqpzjCBAgQIAAAQIECBAYLSCAjCZzAAECBAgQIECAAAECUwUEkKlyjiNAgAABAgQIECBAYLSAADKazAEECBAgQIAAAQIECEwVEECmyjmOAAECBAgQIECAAIHRAgLIaDIHECBAgAABAgQIECAwVUAAmSrnOAIECBAgQIAAAQIERgsIIKPJHECAAAECBAgQIECAwFQBAWSqnOMIECBAgAABAgQIEBgtIICMJnMAAQIECBAgQIAAAQJTBQSQqXKOI0CAAAECBAgQIEBgtIAAMprMAQQIECBAgAABAgQITBUQQKbKOY4AAQIECBAgQIAAgdECAshoMgcQIECAAAECBAgQIDBVQACZKuc4AgQIECBAgAABAgRGCwggo8kcQIAAAQIECBAgQIDAVAEBZKqc4wgQIECAAAECBAgQGC0ggIwmcwABAgQIECBAgAABAlMFBJCpco4jQIAAAQIECBAgQGC0gAAymswBBAgQIECAAAECBAhMFRBApso5jgABAgQIECBAgACB0QICyGgyBxAgQIAAAQIECBAgMFVAAJkq5zgCBAgQIECAAAECBEYLCCCjyRxAgAABAgQIECBAgMBUAQFkqpzjCBAgQIAAAQIECBAYLSCAjCZzAAECBAgQIECAAAECUwUEkKlyjiNAgAABAgQIECBAYLSAADKazAEECBAgQIAAAQIECEwVEECmyjmOAAECBAgQIECAAIHRAgLIaDIHECBAgAABAgQIECAwVUAAmSrnOAIECBAgQIAAAQIERgsIIKPJHECAAAECBAgQIECAwFQBAWSqnOMIECBAgAABAgQIEBgtIICMJnMAAQIECBAgQIAAAQJTBQSQqXKOI0CAAAECBAgQIEBgtIAAMprMAQQIECBAgAABAgQITBUQQKbKOY4AAQIECBAgQIAAgdECAshoMgcQIECAAAECBAgQIDBVQACZKuc4AgQIECBAgAABAgRGCwggo8kcQIAAAQIECBAgQIDAVAEBZKqc4wgQIECAAAECBAgQGC0ggIwmcwABAgQIECBAgAABAlMFBJCpco4jQIAAAQIECBAgQGC0gAAymswBBAgQIECAAAECBAhMFRBApso5jgABAgQIECBAgACB0QICyGgyBxAgQIAAAQIECBAgMFVAAJkq5zgCBAgQIECAAAECBEYLCCCjyRxAYJrAnfv7x8Ycef/O7uGY/e1LgAABAgQIEFiDgACyhiq5xk0I3L23f8OYjty7u3tmzP72JUCAAAECBAisQUAAWUOVXOMmBASQTZRRJwgQIECAAIEbCgggNwR0OIFTBQSQU6XsR4AAAQIECGxZQADZcnX17aIEBJCLKoeLIUCAAAECBBYSEEAWgtdsewICSHs112MCBAgQIEDgPQUEEHcFgZkEBJCZoDVDgAABAgQIXLSAAHLR5XFxWxIQQLZUTX0hQIAA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MQJiBOTU/37cW6dK2Y8AAQIECKxPQABZX80u5oo9JI4rhVewTvdyb51uZU8CBAgQILA2AQFkbRW7oOv1kDiuGALI6V7urdOt7EmAAAECBNYmIICsrWIXdL0eEscVQwA53cu9dbqVPQkQIECAwNoEBJC1VeyCrjcPiWMv5/6d3cOxx2xl/yF8+dkAAB0fSURBVLFerMZVvmWvcVL2JkCAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwICSFPl1lkCBAgQIECAAAECywoIIMv6a50AAQIECBAgQIBAUwJbDyBfv6re94SKvquqvrLb7wOq6rVV9QVV9bknHGsXAgQIECBAgAABAgROFNh6AHl1VT1ZVY9X1fsfMfkfVfUXquqTu8CRXZ6tqtdX1f/pjvkvJ1rajQABAgQIECBAgACBawS2HkD67r+sqv5xVX2tgce/rKrvW1VfcmCUUY+P7v7uw6vq77iLCBAgQIAAAQIECBC4HYFWAki0/mJVff8B28+tqs88wvhZVfXTur//plX1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"

      # var data = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="
      $('.cloudinary-button').on 'click', () ->
        canvas.discardActiveObject()
        data = canvas.toDataURL('jpg')
        $('.cloudinary_fileupload').fileupload('option', 'formData').file = data;
        $('.cloudinary_fileupload').fileupload('add', { files: [ data ] })
        delete($('.cloudinary_fileupload').fileupload('option', 'formData').file);

    # data = canvas
    # data = "data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4%2F%2F8%2Fw38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg%3D%3D"
    # $('.cloudinary').fileupload('option', 'formData').file = data

    # scope.upload = () ->
    #   $('.cloudinary').fileupload('add', { files: [ data ] })

    # observeBoolean = (property) ->
    #   document.getElementById(property).onclick = () ->
    #     canvas.item(0)[property] = this.checked
    #     canvas.renderAll()
    #
    # observeNumeric = (property) ->
    #   document.getElementById(property).onchange = () ->
    #     canvas.item(0)[property] = this.value
    #     canvas.renderAll()
    #
    # observeOptionsList = (property) ->
    #   list = document.querySelectorAll('#' + property + ' [type="checkbox"]')
    #   for (var i = 0, len = list.length; i < len; i++)
    #     list[i].onchange = () ->
    #       canvas.item(0)[property](this.name, this.checked)
    #       canvas.renderAll()

    # observeBoolean('hasControls');
    # observeBoolean('hasBorders');
    # observeBoolean('hasRotatingPoint');
    # observeBoolean('visible');
    # observeBoolean('selectable');
    # observeBoolean('evented');
    # observeBoolean('transparentCorners');
    # observeBoolean('centeredScaling');
    # observeBoolean('centeredRotation');
    #
    # observeNumeric('padding');
    # observeNumeric('cornerSize');
    # observeNumeric('rotatingPointOffset');
    # observeNumeric('borderColor');
    # observeNumeric('cornerColor');
    #
    # observeOptionsList('setControlVisible');

    return
