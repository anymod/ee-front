<!--header-->
<nav class="navbar navbar-fixed-top e-brand">
  <div class="container">
    <div class="navbar-form pad-0 no-shadow">
      <a ui-sref="catalog" class="btn btn-default">
        <i class="glyphicon glyphicon-arrow-left"></i> Catalog
      </a>
    </div>
  </div>
</nav>


<div class="container pad-top-navbar">
  <div class="row vert-10">
    <ee-product-listing product="product"
                       route="generate"></e-product-listing>
  </div>

  <form name="generateLink">
    <div class="well well-compact">
      <h3 class="vert-5">
        1. Set your selling price:
        <span click-anywhere="showEditPrice = false">
          <span ng-click="editPrice = sellerPrice; showEditPrice = true"
                ng-hide="showEditPrice">
            {{ sellerPrice | currency }}
            <small><i class="glyphicon glyphicon-pencil"></i></small>
          </span>
          <span ng-show="showEditPrice">
            $
            <input type="number" ng-model="editPrice" style="max-width: 100px;">
          </span>
        </span>
      </h3>

      <div class="full-width" style="position: relative;">
        <slider class="vert-10 progress-slider"
          ng-model="sellerPrice"
          floor="{{ product.baselinePrice }}"
          ceiling="{{ maxPrice }}"
          step=".01"
          precision="2">
        </slider>
        <div class="progress margin-0">
          <span class="progress-bar progress-bar-info right-border" style="width: 50%"></span>
          <span class="progress-bar progress-bar-primary progress-bar-striped active no-transition" style="width: {{ 50 - (maxPrice - sellerPrice)/maxPrice * 100 }}%"></span>
        </div>
      </div>

      <h5 class="full-width inline-block">
        <span class="inline-block text-center" style="width: 49%;">
          baseline price: {{ product.baselinePrice | currency }}
        </span>
        <strong class="inline-block text-center text-success" style="width: 49%;">
          your profit: {{ sellerPrice - product.baselinePrice | currency }}</span>
        </strong>
      </h5>
    </div>
    <div class="well well-compact">
      <h3 class="vert-5">
        2. Enter your PayPal address
      </h3>
      <input type="email" class="form-control" ng-model="email" required>
      This is the email address where we will send payment to if the product sells from your link.
    </div>
    <div class="well well-compact">
      <h3 class="vert-5">
        3. Generate your link
      </h3>
      <p>
        You will get a custom link to share wherever you want.
        When someone purchases this product from your link (and keeps it),
        you will earn <span class="text-success">{{ sellerPrice - product.baselinePrice | currency }}</span>.
      </p>
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="agreedToTerms">
          I agree to the
          <a href="" ng-click="showTerms = !showTerms">seller terms and conditions</a>.
        </label>
      </div>
      <div class="alert alert-danger alert-dismissible vert-5" ng-show="validationError" role="alert">
        {{ validationError }}
        <button type="button" class="close" ng-click="validationError = undefined">&times;</button>
      </div>
      <button ng-click="createLink()"
              class="btn btn-lg btn-primary"
              ng-disabled="generateLink.$invalid || !agreedToTerms">
        Generate link
      </button>
    </div>
  </form>
</div>

<div class="full-screen {{ fullScreen }}">
  <ee-previewer product="product"></e-previewer>
</div>

<div class="full-screen {{ showTerms }}">
  <div class="container vert-20">
    <button class="btn btn-default btn-block vert-10" ng-click="showTerms = false">
      <i class="glyphicon glyphicon-remove"></i> Close
    </button>

    <div ng-include="'partials/terms_seller.html'"></div>

    <button class="btn btn-default btn-block vert-10" ng-click="showTerms = false">
      <i class="glyphicon glyphicon-remove"></i> Close
    </button>
  </div>
</div>

<br>
<br>
